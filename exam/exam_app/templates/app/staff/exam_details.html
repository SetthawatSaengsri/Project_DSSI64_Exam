{% extends "app/base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto py-12 px-6 sm:px-8 lg:px-10 text-center">
    <h2 class="text-3xl font-bold text-indigo-700 mb-6">ğŸ“‹ à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸à¸²à¸£à¸ªà¸­à¸š</h2>

    <p class="text-lg">à¸Šà¸·à¹ˆà¸­: {{ student.user.first_name }} {{ student.user.last_name }}</p>
    <p class="text-lg">à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™: {{ student.student_id }}</p>
    <p class="text-lg">à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸‡à¸ªà¸­à¸š: {{ student.id }}</p>
    <p class="text-lg">à¸§à¸´à¸Šà¸²: {{ subject.subject_name }}</p>
    <p class="text-lg">à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸­à¸š: {{ subject.exam_date }}</p>
    <p class="text-lg">à¹€à¸§à¸¥à¸²: {{ subject.start_time }} - {{ subject.end_time }}</p>
    <p class="text-lg">à¸«à¹‰à¸­à¸‡à¸ªà¸­à¸š: {{ subject.room }}</p>

    <!-- à¸›à¸¸à¹ˆà¸¡à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸ªà¸­à¸š -->
    <button id="confirm-btn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 text-lg rounded-lg shadow-lg transition-transform transform hover:scale-105">
        à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸ªà¸­à¸š
    </button>
</div>

<script>
    document.getElementById('confirm-btn').addEventListener('click', function() {
        fetch("{% url 'confirm_exam_entry' %}", {
            method: 'POST',
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": "{{ csrf_token }}"
            },
            body: JSON.stringify({
                student_id: "{{ student.id }}",
                subject_id: "{{ subject.id }}"
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === "success") {
                alert("à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸ªà¸­à¸šà¸ªà¸³à¹€à¸£à¹‡à¸ˆ");
                window.location.href = "{% url 'dashboard_student' %}";
            } else {
                alert(data.message || "à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”");
            }
        })
        .catch(error => console.error('Error:', error));
    });
</script>
{% endblock %}
