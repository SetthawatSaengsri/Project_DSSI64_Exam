{% extends "app/base.html" %}

{% block content %}
<div class="container mx-auto mt-10 max-w-5xl px-4 md:px-8">
    <div class="bg-white shadow-lg rounded-xl p-10 text-center">
        <h2 class="text-4xl font-bold text-indigo-700 mb-8">ğŸ“Œ QR Code à¸ªà¸³à¸«à¸£à¸±à¸šà¸£à¸²à¸¢à¸§à¸´à¸Šà¸²</h2>

        <!-- âœ… à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸²à¸¢à¸§à¸´à¸Šà¸² -->
        <div class="text-center mb-6">
            <p class="text-xl text-gray-700 font-medium">ğŸ“– à¸§à¸´à¸Šà¸²: <span class="font-semibold text-indigo-600">{{ subject.subject_name }}</span></p>
            <p class="text-lg text-gray-600">ğŸ”¢ à¸£à¸«à¸±à¸ªà¸§à¸´à¸Šà¸²: <span class="font-semibold text-indigo-600">{{ subject.subject_code }}</span></p>
            <p class="text-lg text-gray-600">ğŸ“… à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸­à¸š: <span class="font-semibold text-indigo-600">{{ subject.exam_date }}</span></p>
            <p class="text-lg text-gray-600">â° à¹€à¸§à¸¥à¸²: <span class="font-semibold text-indigo-600">{{ subject.start_time }} - {{ subject.end_time }}</span></p>
            <p class="text-lg text-gray-600">ğŸ« à¸«à¹‰à¸­à¸‡à¸ªà¸­à¸š: <span class="font-semibold text-indigo-600">{{ subject.room }}</span></p>
            <p class="text-lg text-gray-600">ğŸ“ à¸£à¸°à¸”à¸±à¸šà¸Šà¸±à¹‰à¸™: 
                <span class="font-semibold text-indigo-600">
                    {% for student in subject.students.all %}
                        {{ student.student_class }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </span>
            </p>
            <p class="text-lg text-gray-600">ğŸ‘¨â€ğŸ« à¸œà¸¹à¹‰à¸„à¸¸à¸¡à¸ªà¸­à¸š: 
                <span class="font-semibold text-indigo-600">
                    {% if subject.invigilator %}
                        {{ subject.invigilator.user.first_name }} {{ subject.invigilator.user.last_name }}
                    {% else %}
                        -
                    {% endif %}
                </span>
            </p>
        </div>

        <!-- âœ… à¹à¸ªà¸”à¸‡ QR Code à¹ƒà¸«à¹‰à¸­à¸¢à¸¹à¹ˆà¸•à¸£à¸‡à¸à¸¥à¸²à¸‡ -->
        <div class="mt-8 flex justify-center">
            <div class="border-4 border-gray-300 p-6 rounded-lg shadow-md">
                <img src="data:image/png;base64,{{ img_base64 }}" alt="QR Code" class="max-w-xs">
            </div>
        </div>

        <!-- âœ… à¸›à¸¸à¹ˆà¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸à¸´à¸¡à¸à¹Œà¹à¸¥à¸°à¸à¸¥à¸±à¸šà¹„à¸›à¸¢à¸±à¸‡à¸«à¸™à¹‰à¸²à¸§à¸´à¸Šà¸² -->
        <div class="text-center mt-8 flex justify-center space-x-4">
            <button onclick="window.print()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-md shadow-md transition">
                ğŸ–¨ï¸ à¸à¸´à¸¡à¸à¹Œ QR Code
            </button>
            <a href="{% url 'exam_subjects_staff' %}" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-md shadow-md transition">
                ğŸ”™ à¸à¸¥à¸±à¸šà¹„à¸›à¸«à¸™à¹‰à¸²à¸§à¸´à¸Šà¸²
            </a>
        </div>

        <!-- âœ… à¸„à¸³à¹à¸™à¸°à¸™à¸³ -->
        <div class="mt-6 text-center">
            <p class="text-gray-600">ğŸ“± à¸ªà¹à¸à¸™ QR Code à¸™à¸µà¹‰à¹€à¸à¸·à¹ˆà¸­à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸‚à¸­à¸‡à¸§à¸´à¸Šà¸²</p>
        </div>
    </div>
</div>
{% endblock %}

<!-- âœ… CSS à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸à¸´à¸¡à¸à¹Œ -->
{% block extra_css %}
<style>
    @media print {
        body * {
            visibility: hidden;
        }
        .container, .container * {
            visibility: visible;
        }
        .container {
            position: absolute;
            left: 0;
            top: 0;
        }
        .container img {
            width: 100%; /* âœ… à¸—à¸³à¹ƒà¸«à¹‰ QR Code à¸à¸­à¸”à¸µà¸à¸±à¸šà¸«à¸™à¹‰à¸²à¸à¸£à¸°à¸”à¸²à¸© */
        }
    }
</style>
{% endblock %}
